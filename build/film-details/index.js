(()=>{"use strict";var e,t={792(e,t,i){const l=window.wp.blocks,n=JSON.parse('{"UU":"eventive/film-details"}'),a=window.wp.i18n,s=window.wp.blockEditor,o=window.wp.components,r=window.wp.element,v=window.wp.apiFetch;var d=i.n(v);const c=window.ReactJSXRuntime;(0,l.registerBlockType)(n.UU,{edit:function({attributes:e,setAttributes:t}){const i=(0,s.useBlockProps)(),{filmId:l,showEvents:n,showDetails:v,showTags:h,excludeVirtual:p}=e,[u,f]=(0,r.useState)([]),[m,w]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{try{const e=new URLSearchParams({eventive_nonce:window.EventiveBlockData?.eventNonce||""}),t=await d()({path:`eventive/v1/films?${e.toString()}`,method:"GET"}),i=(t.films||t||[]).map(e=>({label:e.name||e.title||"Untitled",value:e.id}));i.sort((e,t)=>e.label.localeCompare(t.label)),f(i)}catch(e){console.error("Error fetching films:",e)}finally{w(!1)}})()},[]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(s.InspectorControls,{children:[(0,c.jsx)(o.PanelBody,{title:(0,a.__)("Film Settings","eventive"),initialOpen:!0,children:m?(0,c.jsxs)("div",{style:{padding:"10px 0"},children:[(0,c.jsx)(o.Spinner,{})," ",(0,a.__)("Loading filmsâ€¦","eventive")]}):(0,c.jsx)(o.SelectControl,{label:(0,a.__)("Select Film","eventive"),value:l,options:[{label:(0,a.__)("-- Select a Film --","eventive"),value:""},...u],onChange:e=>t({filmId:e}),help:(0,a.__)("Choose a film to display (can also be passed via URL parameter)","eventive")})}),(0,c.jsxs)(o.PanelBody,{title:(0,a.__)("Display Settings","eventive"),initialOpen:!0,children:[(0,c.jsx)(o.ToggleControl,{label:(0,a.__)("Show Events","eventive"),checked:n,onChange:e=>t({showEvents:e}),help:(0,a.__)("Display event listings for this film","eventive")}),(0,c.jsx)(o.ToggleControl,{label:(0,a.__)("Show Details","eventive"),checked:v,onChange:e=>t({showDetails:e}),help:(0,a.__)("Display film details (description, cast, etc.)","eventive")}),(0,c.jsx)(o.ToggleControl,{label:(0,a.__)("Show Tags","eventive"),checked:h,onChange:e=>t({showTags:e}),help:(0,a.__)("Display film tags/genres","eventive")}),(0,c.jsx)(o.ToggleControl,{label:(0,a.__)("Exclude Virtual","eventive"),checked:p,onChange:e=>t({excludeVirtual:e}),help:(0,a.__)("Exclude virtual events from display","eventive")})]})]}),(0,c.jsx)("div",{...i,children:(0,c.jsxs)("div",{className:"eventive-block-placeholder",children:[(0,c.jsx)("h3",{className:"eventive-block-placeholder__title",children:(0,a.__)("Eventive Film Details","eventive")}),(0,c.jsx)("div",{className:"eventive-block-placeholder__description",children:(0,c.jsx)("p",{children:l?`${(0,a.__)("Selected Film:","eventive")} ${u.find(e=>e.value===l)?.label||l}`:(0,a.__)("Film details will display here (set Film ID or use URL parameter)","eventive")})})]})})]})},save:function({attributes:e}){const t=s.useBlockProps.save(),{filmId:i,showEvents:l,showDetails:n,showTags:a,excludeVirtual:o}=e;return(0,c.jsx)("div",{...t,"data-film-id":i,"data-show-events":l?"true":"false","data-show-details":n?"true":"false","data-show-tags":a?"true":"false","data-exclude-virtual":o?"true":"false",children:(0,c.jsx)("div",{className:"eventive-film-details",children:(0,c.jsx)("p",{className:"eventive-film-loading-text",children:"Loading film details..."})})})},icon:"format-video"})}},i={};function l(e){var n=i[e];if(void 0!==n)return n.exports;var a=i[e]={exports:{}};return t[e](a,a.exports,l),a.exports}l.m=t,e=[],l.O=(t,i,n,a)=>{if(!i){var s=1/0;for(d=0;d<e.length;d++){for(var[i,n,a]=e[d],o=!0,r=0;r<i.length;r++)(!1&a||s>=a)&&Object.keys(l.O).every(e=>l.O[e](i[r]))?i.splice(r--,1):(o=!1,a<s&&(s=a));if(o){e.splice(d--,1);var v=n();void 0!==v&&(t=v)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[i,n,a]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var i in t)l.o(t,i)&&!l.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={8105:0,4781:0};l.O.j=t=>0===e[t];var t=(t,i)=>{var n,a,[s,o,r]=i,v=0;if(s.some(t=>0!==e[t])){for(n in o)l.o(o,n)&&(l.m[n]=o[n]);if(r)var d=r(l)}for(t&&t(i);v<s.length;v++)a=s[v],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(d)},i=globalThis.webpackChunkeventive_integration=globalThis.webpackChunkeventive_integration||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var n=l.O(void 0,[4781],()=>l(792));n=l.O(n)})();