(()=>{"use strict";var e,n={82(e,n,t){const i=window.wp.blocks,l=JSON.parse('{"UU":"eventive/single-film"}'),o=window.wp.i18n,a=window.wp.blockEditor,r=window.wp.components,s=window.wp.element,v=window.wp.apiFetch;var d=t.n(v);const c=window.ReactJSXRuntime;(0,i.registerBlockType)(l.UU,{edit:function({attributes:e,setAttributes:n}){const t=(0,a.useBlockProps)(),[i,l]=(0,s.useState)([]),[v,h]=(0,s.useState)([]),[p,m]=(0,s.useState)(!0),[f,_]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async()=>{try{const e=new URLSearchParams({eventive_nonce:window.EventiveBlockData?.eventNonce||""}),n=await d()({path:`eventive/v1/films?${e.toString()}`,method:"GET"}),t=(n.films||n||[]).map(e=>({label:e.name||e.title||"Untitled",value:e.id}));t.sort((e,n)=>e.label.localeCompare(n.label)),l(t)}catch(e){console.error("Error fetching films:",e)}finally{m(!1)}})(),(async()=>{try{const e=new URLSearchParams({eventive_nonce:window.EventiveBlockData?.eventNonce||""}),n=await d()({path:`eventive/v1/events?${e.toString()}`,method:"GET"}),t=(n.events||n||[]).map(e=>({label:e.name||e.title||"Untitled",value:e.id})).sort((e,n)=>e.label.localeCompare(n.label));h(t)}catch(e){console.error("Error fetching events:",e)}finally{_(!1)}})()},[]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.InspectorControls,{children:(0,c.jsxs)(r.PanelBody,{title:(0,o.__)("Single Film Settings","eventive"),children:[p?(0,c.jsxs)("div",{style:{padding:"10px 0"},children:[(0,c.jsx)(r.Spinner,{})," ",(0,o.__)("Loading films…","eventive")]}):(0,c.jsx)(r.SelectControl,{label:(0,o.__)("Select Film","eventive"),value:e.filmId,options:[{label:(0,o.__)("-- Select a Film --","eventive"),value:""},...i],onChange:e=>{n({filmId:e,eventId:""})},help:(0,o.__)("Choose a film to display","eventive")}),f?(0,c.jsxs)("div",{style:{padding:"10px 0"},children:[(0,c.jsx)(r.Spinner,{})," ",(0,o.__)("Loading events…","eventive")]}):(0,c.jsx)(r.SelectControl,{label:(0,o.__)("Select Event","eventive"),value:e.eventId,options:[{label:(0,o.__)("-- Select an Event --","eventive"),value:""},...v],onChange:e=>{n({eventId:e,filmId:""})},help:(0,o.__)("Choose an event to display","eventive")}),(0,c.jsx)("p",{className:"components-base-control__help",children:(0,o.__)("Provide either a Film or Event (not both).","eventive")})]})}),(0,c.jsx)("div",{...t,children:(0,c.jsxs)("div",{className:"eventive-block-placeholder",children:[(0,c.jsx)("h3",{className:"eventive-block-placeholder__title",children:(0,o.__)("Eventive Single Film","eventive")}),(0,c.jsxs)("div",{className:"eventive-block-placeholder__description",children:[(0,c.jsx)("p",{children:(0,o.__)("Film or event details will display on the frontend.","eventive")}),e.filmId&&(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:(0,o.__)("Selected Film:","eventive")})," ",i.find(n=>n.value===e.filmId)?.label||e.filmId]}),e.eventId&&(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:(0,o.__)("Selected Event:","eventive")})," ",v.find(n=>n.value===e.eventId)?.label||e.eventId]}),!e.filmId&&!e.eventId&&(0,c.jsx)("p",{className:"warning",children:(0,o.__)("Please select either a Film or Event in the block settings.","eventive")})]})]})})]})},save:function({attributes:e}){const n=a.useBlockProps.save(),{filmId:t,eventId:i}=e;return(0,c.jsx)("div",{...n,"data-film-id":t,"data-event-id":i,children:(0,c.jsxs)("div",{id:"single-film-or-event-container",children:[(0,c.jsx)("div",{id:"hero-section"}),(0,c.jsx)("div",{id:"details-container"})]})})}})}},t={};function i(e){var l=t[e];if(void 0!==l)return l.exports;var o=t[e]={exports:{}};return n[e](o,o.exports,i),o.exports}i.m=n,e=[],i.O=(n,t,l,o)=>{if(!t){var a=1/0;for(d=0;d<e.length;d++){for(var[t,l,o]=e[d],r=!0,s=0;s<t.length;s++)(!1&o||a>=o)&&Object.keys(i.O).every(e=>i.O[e](t[s]))?t.splice(s--,1):(r=!1,o<a&&(a=o));if(r){e.splice(d--,1);var v=l();void 0!==v&&(n=v)}}return n}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[t,l,o]},i.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return i.d(n,{a:n}),n},i.d=(e,n)=>{for(var t in n)i.o(n,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},i.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={5703:0,4191:0};i.O.j=n=>0===e[n];var n=(n,t)=>{var l,o,[a,r,s]=t,v=0;if(a.some(n=>0!==e[n])){for(l in r)i.o(r,l)&&(i.m[l]=r[l]);if(s)var d=s(i)}for(n&&n(t);v<a.length;v++)o=a[v],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},t=globalThis.webpackChunkeventive_integration=globalThis.webpackChunkeventive_integration||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var l=i.O(void 0,[4191],()=>i(82));l=i.O(l)})();