(()=>{"use strict";const e=window.wp.element,t=window.ReactJSXRuntime;function n({event:e,isActive:n}){const i=e.name||"Untitled Event",s=e.start_time?new Date(e.start_time):null,a=s?s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}).toLowerCase():"Time not available",o=s?s.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}):"Date not available",r=e.venue&&e.venue.name?` at ${e.venue.name}`:"",c=function(e){return e.images&&(e.images.cover_image||e.images.cover)||e.cover_image||e.films&&e.films[0]&&(e.films[0].still_image||e.films[0].cover_image||e.films[0].poster_image)||""}(e),l=!e.hide_tickets_button;return(0,t.jsx)("div",{className:"carousel-slide "+(n?"active":""),style:{backgroundImage:`url('${c}')`},children:(0,t.jsxs)("div",{className:"carousel-banner",children:[(0,t.jsx)("h3",{className:"carousel-title",children:i}),(0,t.jsxs)("p",{className:"carousel-time",children:[o," • ",a,r]}),l&&(0,t.jsx)("div",{className:"carousel-ticket-button",children:(0,t.jsx)("div",{className:"eventive-button","data-event":e.id})})]})})}function i({limit:i,showDescription:s}){const[a,o]=(0,e.useState)([]),[r,c]=(0,e.useState)(0),[l,u]=(0,e.useState)(!0),[d,v]=(0,e.useState)(!1),m=(0,e.useRef)(null),w=(0,e.useRef)(null),h=(0,e.useRef)(!1),f=window.EventiveBlockData?.eventBucket||"";return(0,e.useEffect)(()=>{if(!f)return void u(!1);let e=!1;const t=()=>{h.current||e||(h.current=!0,window.Eventive.request({method:"GET",path:`event_buckets/${f}/events`,authenticatePerson:!1}).then(t=>{if(e)return;const n=t.events||[];o(n.slice(0,i)),u(!1)}).catch(()=>{e||(h.current=!1,u(!1))}))};return window.Eventive&&window.Eventive._ready?t():window.Eventive&&"function"==typeof window.Eventive.on?window.Eventive.on("ready",t):setTimeout(()=>{window.Eventive&&"function"==typeof window.Eventive.request?t():u(!1)},1e3),()=>{e=!0,window.Eventive&&"function"==typeof window.Eventive.off&&window.Eventive.off("ready",t)}},[f,i]),(0,e.useEffect)(()=>{if(!(a.length<=1||d))return window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches?void 0:(w.current=setInterval(()=>{c(e=>(e+1)%a.length)},5e3),()=>{w.current&&clearInterval(w.current)})},[a.length,d]),(0,e.useEffect)(()=>{if(a.length>0&&m.current){const e=setTimeout(()=>{window.Eventive&&window.Eventive.rebuild&&window.Eventive.rebuild(m.current)},100);return()=>clearTimeout(e)}},[a.length]),l?(0,t.jsx)("div",{className:"eventive-loading",children:"Loading events..."}):0===a.length?(0,t.jsx)("div",{className:"no-events",children:"No upcoming events found."}):(0,t.jsx)("div",{ref:m,className:"event-carousel-container",onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:(0,t.jsxs)("div",{className:"carousel-slider",children:[(0,t.jsx)("button",{className:"carousel-arrow left",onClick:()=>{c(e=>(e-1+a.length)%a.length)},"aria-label":"Previous",children:"‹"}),(0,t.jsx)("button",{className:"carousel-arrow right",onClick:()=>{c(e=>(e+1)%a.length)},"aria-label":"Next",children:"›"}),(0,t.jsx)("div",{className:"carousel-slides",children:a.map((e,i)=>(0,t.jsx)(n,{event:e,isActive:i===r},e.id))}),(0,t.jsx)("div",{className:"carousel-dots",children:a.map((e,n)=>(0,t.jsx)("button",{className:"carousel-dot "+(n===r?"active":""),onClick:()=>(e=>{c(e)})(n),"aria-label":`Go to slide ${n+1}`},n))})]})})}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".wp-block-eventive-carousel").forEach(n=>{const s=parseInt(n.dataset.limit||"10",10),a="true"===n.dataset.showDescription;(0,e.createRoot)(n).render((0,t.jsx)(i,{limit:s,showDescription:a}))})})})();