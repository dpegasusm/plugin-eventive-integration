(()=>{"use strict";const e=window.wp.element,n=window.ReactJSXRuntime;function o({childNodes:o}){const[t,i]=(0,e.useState)(!1),[c,r]=(0,e.useState)(!0),v=(0,e.useRef)(null);return(0,e.useEffect)(()=>{const e=()=>{if(window.Eventive&&"function"==typeof window.Eventive.isLoggedIn)try{const e=window.Eventive.isLoggedIn();i(e)}catch(e){i(!1)}finally{r(!1)}},n=()=>{i(!0)},o=()=>{i(!1)};if(!window.Eventive||!window.Eventive.on)return r(!1),void i(!1);window.Eventive._ready||window.Eventive.ready?e():window.Eventive.on("ready",e);try{window.Eventive.on("login",n),window.Eventive.on("logout",o)}catch(e){}return()=>{if(window.Eventive&&window.Eventive.off)try{window.Eventive.off("ready",e),window.Eventive.off("login",n),window.Eventive.off("logout",o)}catch(e){}}},[]),(0,e.useEffect)(()=>{v.current&&o&&o.length>0&&(v.current.innerHTML="",o.forEach(e=>{v.current.appendChild(e)}))},[t,c,o]),c?(0,n.jsx)("div",{className:"eventive-account-container",children:(0,n.jsx)("p",{className:"eventive-loading",children:"Loading..."})}):t?(0,n.jsxs)("div",{className:"eventive-account-container",children:[(0,n.jsx)("div",{className:"account-actions",children:(0,n.jsx)("a",{href:"#",onClick:async e=>{if(e.preventDefault(),"function"==typeof window.handleLogout)try{return void window.handleLogout()}catch(e){console.error("handleLogout error:",e)}try{["eventivePersonToken","eventiveAppPersonToken","eventive_token","eventive_person_token"].forEach(e=>{try{localStorage.removeItem(e)}catch(e){}});try{sessionStorage.clear()}catch(e){}if(document.cookie="eventive-personState=; path=/; max-age=0",window.Eventive&&window.Eventive.logout)try{await window.Eventive.logout()}catch(e){console.error("Eventive.logout() failed:",e)}if(window.Eventive&&window.Eventive.request)try{await window.Eventive.request({method:"POST",path:"people/logout",authenticatePerson:!0})}catch(e){}window.location.reload()}catch(e){console.error("Unexpected logout error:",e),window.location.reload()}},className:"eventive-logout-link",children:"Log out"})}),(0,n.jsx)("div",{ref:v,className:"eventive-account-child-blocks"})]}):(0,n.jsx)("div",{className:"eventive-account-container",children:(0,n.jsx)("div",{className:"eventive-notice",children:(0,n.jsx)("p",{children:"You are not logged in. Please log in to view your account."})})})}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".wp-block-eventive-account").forEach(t=>{if(t.__evtInited)return;t.__evtInited=!0;const i=Array.from(t.childNodes);(0,e.createRoot)(t).render((0,n.jsx)(o,{childNodes:i}))})})})();