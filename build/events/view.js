(()=>{"use strict";window.wp.element,document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".wp-block-eventive-events").forEach(t=>{const e=t.getAttribute("data-tag-id")||"",n=t.getAttribute("data-venue-id")||"",i=t.getAttribute("data-image")||"poster",o="true"===t.getAttribute("data-description"),a="true"===t.getAttribute("data-show-filter"),s=(t.getAttribute("data-event-id"),t.getAttribute("data-films-base")||""),v=window.EventiveBlockData?.eventBucket||"",r=(window.EventiveBlockData,s||window.EventiveBlockData?.filmDetailBaseURL||""),l=window.EventiveBlockData?.usePrettyPermalinks||!1,d=window.EventiveBlockData?.filmSyncEnabled||!1,c=()=>{const s={};e&&(s["tag-id"]=e),n&&(s["venue-id"]=n);let c=`event_buckets/${v}/events`;Object.keys(s).length>0&&(c+=`?${new URLSearchParams(s).toString()}`),window.Eventive.request({method:"GET",path:c,authenticatePerson:!1}).then(e=>{const n=(e?.events||[]).filter(t=>!t.is_virtual);!function(t,e,n){if(!e.length)return void(t.innerHTML='<p class="no-events">No upcoming events found.</p>');const i={};e.forEach(t=>{const e=new Date(t.start_time).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"});i[e]||(i[e]=[]),i[e].push(t)});let o='<div class="event-schedule-container">';Object.keys(i).forEach(t=>{const e=i[t],a=`events-count-${Math.min(e.length,3)}`;o+=`\n\t\t\t\t<div class="event-group">\n\t\t\t\t\t<h3 class="event-group-header">${t}</h3>\n\t\t\t\t\t<div class="event-group-items ${a}">\n\t\t\t`,e.forEach(t=>{o+=function(t,e){const{imageMode:n,showDescription:i,filmDetailBaseURL:o}=e,a=new Date(t.start_time).toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"});let s="";if("none"!==n&&t.film){const e="poster"===n?t.film.poster_url:"cover"===n?t.film.cover_url:t.film.still_url;e&&(s=`<div class="event-image"><img src="${e}" alt="${t.film.name||t.name}" /></div>`)}let v="";return i&&t.description&&(v=`<p class="event-description">${t.description}</p>`),`\n\t\t\t<div class="event-item">\n\t\t\t\t${s}\n\t\t\t\t<div class="event-content">\n\t\t\t\t\t<h4 class="event-title">${t.name}</h4>\n\t\t\t\t\t<p class="event-time">${a}</p>\n\t\t\t\t\t${t.venue?`<p class="event-venue">${t.venue.name}</p>`:""}\n\t\t\t\t\t${v}\n\t\t\t\t\t<button class="eventive-button" data-eventive-event-id="${t.id}">Buy Tickets</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`}(t,n)}),o+="</div></div>"}),o+="</div>",t.innerHTML=o}(t,n,{imageMode:i,showDescription:o,showFilter:a,filmDetailBaseURL:r,prettyPermalinks:l,filmSyncEnabled:d}),window.Eventive?.rebuild&&window.Eventive.rebuild()}).catch(e=>{console.error("[eventive-events] Error fetching events:",e),t.innerHTML='<p class="error-message">Failed to load events.</p>'})};window.Eventive&&window.Eventive._ready?c():window.Eventive&&"function"==typeof window.Eventive.on?window.Eventive.on("ready",c):setTimeout(()=>{window.Eventive&&"function"==typeof window.Eventive.request?c():(console.error("[eventive-events] Eventive API not available"),t.innerHTML='<p class="error-message">Failed to load events.</p>')},1e3)})})})();