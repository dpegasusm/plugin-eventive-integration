(()=>{"use strict";window.wp.element,document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".wp-block-eventive-events").forEach(e=>{const t=e.getAttribute("data-tag-id")||"",n=e.getAttribute("data-venue-id")||"",i=e.getAttribute("data-image")||"poster",o="true"===e.getAttribute("data-description"),s="true"===e.getAttribute("data-show-filter"),v=(e.getAttribute("data-event-id"),e.getAttribute("data-films-base")||""),a=window.eventiveOptions?.eventBucket||"",r=(window.eventiveOptions,v||window.eventiveOptions?.filmDetailBaseURL||""),d=window.eventiveOptions?.usePrettyPermalinks||!1,l=window.eventiveOptions?.filmSyncEnabled||!1,c=()=>{const v={};t&&(v["tag-id"]=t),n&&(v["venue-id"]=n);let c=`event_buckets/${a}/events`;Object.keys(v).length>0&&(c+=`?${new URLSearchParams(v).toString()}`),window.Eventive.request({method:"GET",path:c,authenticatePerson:!1}).then(t=>{const n=(t?.events||[]).filter(e=>!e.is_virtual);!function(e,t,n){if(!t.length)return void(e.innerHTML='<p class="no-events">No upcoming events found.</p>');const i={};t.forEach(e=>{const t=new Date(e.start_time).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"});i[t]||(i[t]=[]),i[t].push(e)});let o='<div class="event-schedule-container">';Object.keys(i).forEach(e=>{const t=i[e],s=`events-count-${Math.min(t.length,3)}`;o+=`\n\t\t\t\t<div class="event-group">\n\t\t\t\t\t<h3 class="event-group-header">${e}</h3>\n\t\t\t\t\t<div class="event-group-items ${s}">\n\t\t\t`,t.forEach(e=>{o+=function(e,t){const{imageMode:n,showDescription:i,filmDetailBaseURL:o}=t,s=new Date(e.start_time).toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"});let v="";if("none"!==n&&e.film){const t="poster"===n?e.film.poster_url:"cover"===n?e.film.cover_url:e.film.still_url;t&&(v=`<div class="event-image"><img src="${t}" alt="${e.film.name||e.name}" /></div>`)}let a="";return i&&e.description&&(a=`<p class="event-description">${e.description}</p>`),`\n\t\t\t<div class="event-item">\n\t\t\t\t${v}\n\t\t\t\t<div class="event-content">\n\t\t\t\t\t<h4 class="event-title">${e.name}</h4>\n\t\t\t\t\t<p class="event-time">${s}</p>\n\t\t\t\t\t${e.venue?`<p class="event-venue">${e.venue.name}</p>`:""}\n\t\t\t\t\t${a}\n\t\t\t\t\t<button class="eventive-button" data-eventive-event-id="${e.id}">Buy Tickets</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`}(e,n)}),o+="</div></div>"}),o+="</div>",e.innerHTML=o}(e,n,{imageMode:i,showDescription:o,showFilter:s,filmDetailBaseURL:r,prettyPermalinks:d,filmSyncEnabled:l}),window.Eventive?.rebuild&&window.Eventive.rebuild()}).catch(t=>{console.error("[eventive-events] Error fetching events:",t),e.innerHTML='<p class="error-message">Failed to load events.</p>'})};window.Eventive&&window.Eventive._ready?c():window.Eventive&&"function"==typeof window.Eventive.on?window.Eventive.on("ready",c):setTimeout(()=>{window.Eventive&&"function"==typeof window.Eventive.request?c():(console.error("[eventive-events] Eventive API not available"),e.innerHTML='<p class="error-message">Failed to load events.</p>')},1e3)})})})();