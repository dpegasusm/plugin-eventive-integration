(()=>{"use strict";window.wp.element,document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".wp-block-eventive-fundraiser").forEach(t=>{const e=t.dataset.startTime,n=t.dataset.endTime,o=parseFloat(t.dataset.goalAmount)||1e3;if(!e||!n){const e=t.querySelector("#eventive-donations-container");return void(e&&(e.innerHTML="<p>Error: Start and end dates are required.</p>"))}const r=()=>{window.Eventive.request({method:"GET",path:`ledger?start_time=${encodeURIComponent(e)}&end_time=${encodeURIComponent(n)}&type=PAYMENT`,authenticatePerson:!1}).then(e=>{const n=t.querySelector("#eventive-donations-container");let r=0;e&&Array.isArray(e.transactions)&&e.transactions.forEach(t=>{"Donation"===t.category?.ref_label&&(r+=parseFloat(t.gross)/100)});const i=Math.min(r/o*100,100).toFixed(2);n&&(n.innerHTML=`\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<h3>Fundraiser Progress</h3>\n\t\t\t\t\t\t\t\t<div class="progress-bar-container">\n\t\t\t\t\t\t\t\t\t<div class="progress-bar" style="--progress-percent: ${i}%; width: ${i}%;"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<p>$${r.toFixed(2)} of $${o.toFixed(2)} raised (${i}%)</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`)}).catch(e=>{const n=t.querySelector("#eventive-donations-container");n&&(n.innerHTML=`<p>Error fetching donations: ${e.message}</p>`)})};window.Eventive&&window.Eventive._ready?r():window.Eventive&&"function"==typeof window.Eventive.on?window.Eventive.on("ready",r):setTimeout(()=>{if(window.Eventive&&"function"==typeof window.Eventive.request)r();else{console.error("[eventive-fundraiser] Eventive API not available");const e=t.querySelector("#eventive-donations-container");e&&(e.innerHTML="<p>Error: Eventive API not available</p>")}},1e3)})})})();