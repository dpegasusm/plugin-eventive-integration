(()=>{"use strict";const e=window.wp.element,t=window.ReactJSXRuntime;function n(){const[n,i]=(0,e.useState)([]),[r,a]=(0,e.useState)(0),[c,s]=(0,e.useState)(!0);(0,e.useEffect)(()=>{const e=async()=>{window.Eventive&&window.Eventive.cart?(await d(),s(!1),window.Eventive.on&&window.Eventive.on("cartUpdated",d)):setTimeout(e,100)};return e(),()=>{window.Eventive&&window.Eventive.off&&window.Eventive.off("cartUpdated",d)}},[]);const d=async()=>{try{if(!window.Eventive||!window.Eventive.cart)return;const e=await window.Eventive.cart.getCurrentCartOrder(),t=await window.Eventive.cart.getCartQuantity();a(t),e&&e.subitems&&e.subitems.length>0?i(e.subitems):i([]),window.Eventive.rebuild&&window.Eventive.rebuild()}catch(e){console.error("Error updating cart display:",e)}},o=e=>"$"+(e/100).toFixed(2);return c?(0,t.jsx)("div",{className:"cart-loading",children:(0,t.jsx)("p",{children:"Loading cart..."})}):(0,t.jsxs)("div",{className:"eventive-cart-container",children:[(0,t.jsx)("div",{className:"cart-header",children:(0,t.jsxs)("div",{className:"cart-actions",children:[r>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"eventive-button","data-view-cart":"true","data-label":"Go To Checkout"}),(0,t.jsx)("button",{className:"reset-cart-btn",onClick:async()=>{try{window.Eventive.cart.reset&&(await window.Eventive.cart.reset(),await d())}catch(e){console.error("Error resetting cart:",e)}},children:"RESET CART"})]}),0===r&&(0,t.jsx)("a",{href:"/festival-schedule",className:"find-tickets-link",children:"Find Tickets to Add"}),(0,t.jsxs)("span",{className:"cart-quantity",children:["Items in cart: ",(0,t.jsx)("strong",{children:r})]})]})}),(0,t.jsxs)("table",{className:"cart-table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Quantity"}),(0,t.jsx)("th",{children:"Price"}),(0,t.jsx)("th",{children:"Total Price"})]})}),(0,t.jsx)("tbody",{children:0===n.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"4",style:{textAlign:"center"},children:"Your cart is empty."})}):n.map((e,n)=>{const i=e.name||(e.pass_bucket?"Pass":"Ticket"),r=(e.price||0)/100*e.quantity;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:i}),(0,t.jsx)("td",{children:e.quantity}),(0,t.jsx)("td",{children:o(e.price||0)}),(0,t.jsx)("td",{children:o(100*r)})]},n)})})]})]})}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".wp-block-eventive-cart").forEach(i=>{(0,e.createRoot)(i).render((0,t.jsx)(n,{}))})})})();