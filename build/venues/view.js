(()=>{"use strict";var e={n:n=>{var s=n&&n.__esModule?()=>n.default:()=>n;return e.d(s,{a:s}),s},d:(n,s)=>{for(var r in s)e.o(s,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:s[r]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=window.wp.element,s=window.wp.apiFetch;var r=e.n(s);const t=window.ReactJSXRuntime,i=({venue:e})=>(0,t.jsxs)("div",{className:"eventive-venue-card",style:{display:"flex",border:"1px solid #ddd",padding:"2%",margin:"15px auto",borderRadius:"4px",backgroundColor:"#fff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,t.jsx)("div",{style:{flexGrow:6},children:(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{style:{fontSize:"1.2em",color:"#333"},children:e.name}),(0,t.jsx)("br",{}),e.label&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{style:{color:"#666"},children:e.label}),(0,t.jsx)("br",{})]}),(0,t.jsxs)("span",{style:{color:"#555"},children:["Capacity: ",e.default_capacity||"N/A"]}),(0,t.jsx)("br",{}),e.description&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{style:{color:"#666",marginTop:"8px",display:"block"},children:e.description}),(0,t.jsx)("br",{})]}),e.address&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{style:{fontSize:"0.9em",color:"#555"},children:"Street Address:"}),(0,t.jsx)("br",{}),(0,t.jsx)("span",{style:{color:"#666"},children:e.address})]})]})}),e.seatmap_preview_image&&(0,t.jsx)("div",{style:{marginLeft:"20px",flexShrink:0},children:(0,t.jsx)("img",{src:e.seatmap_preview_image,alt:`${e.name} seatmap`,style:{maxWidth:"200px",height:"auto",borderRadius:"4px"}})})]}),a=()=>{const[e,s]=(0,n.useState)([]),[a,o]=(0,n.useState)(!0),[d,l]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{const e=window.EventiveBlockData?.eventBucket||"",n=window.EventiveBlockData?.eventNonce||"";if(!e)return l("Event bucket not configured."),void o(!1);try{const t=new URLSearchParams({bucket_id:e,endpoint:"venues",eventive_nonce:n}),i=await r()({path:`eventive/v1/event_buckets?${t.toString()}`,method:"GET"});i&&Array.isArray(i.venues)?s(i.venues):l("No venues found.")}catch(e){console.error("[eventive-venues] Error fetching venues:",e),l(`Error fetching venues: ${e.message||"Unknown error"}`)}finally{o(!1)}})()},[]),a?(0,t.jsx)("div",{className:"eventive-loading",children:(0,t.jsx)("p",{children:"Loading venues..."})}):d?(0,t.jsx)("div",{className:"eventive-error",children:(0,t.jsx)("p",{children:d})}):0===e.length?(0,t.jsx)("div",{className:"no-events",children:(0,t.jsx)("p",{children:"No venues found."})}):(0,t.jsx)("div",{className:"eventive-venues-container",children:e.map(e=>(0,t.jsx)(i,{venue:e},e.id||e.name))})};document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".wp-block-eventive-venues").forEach(e=>{e.__venuesInitialized||(e.__venuesInitialized=!0,(0,n.createRoot)(e).render((0,t.jsx)(a,{})))})})})();