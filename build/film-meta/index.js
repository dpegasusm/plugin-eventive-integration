(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,a=window.wp.i18n,n=window.wp.blockEditor,l=window.wp.components,i=(window.wp.data,window.wp.element),o=window.wp.apiFetch;var v=e.n(o);const r=window.ReactJSXRuntime,s={_eventive_runtime:{label:(0,a.__)("Runtime","eventive"),format:e=>{if(!e)return(0,a.__)("Runtime not available","eventive");const t=Math.floor(e/60),n=e%60;return t>0?`${t}h ${n}m`:`${n}m`}},_eventive_year:{label:(0,a.__)("Year","eventive"),format:e=>e||(0,a.__)("Year not available","eventive")},_eventive_language:{label:(0,a.__)("Language","eventive"),format:e=>e||(0,a.__)("Language not available","eventive")},_eventive_country:{label:(0,a.__)("Country","eventive"),format:e=>e||(0,a.__)("Country not available","eventive")},_eventive_director:{label:(0,a.__)("Director","eventive"),format:e=>e||(0,a.__)("Director not available","eventive")}},c=JSON.parse('{"UU":"eventive/film-meta"}');(0,t.registerBlockType)(c.UU,{edit:function({attributes:e,setAttributes:t,context:o}){const{metaField:c,label:_,showLabel:d}=e,[m,b]=(0,i.useState)(null),[u,h]=(0,i.useState)(!0),p=(0,n.useBlockProps)({className:"eventive-film-meta-block",style:{display:"inline"}}),w=o.postId;(0,i.useEffect)(()=>{w?(h(!0),v()({path:`/wp/v2/eventive_film/${w}`}).then(e=>{const t=e.meta?.[c];b(t),h(!1)}).catch(e=>{console.error("[eventive-film-meta] Error fetching meta:",e),b(null),h(!1)})):h(!1)},[w,c]);const f=s[c]||{},g=_||f.label||c,j=f.format?f.format(m):m||(0,a.__)("No value","eventive"),x=Object.keys(s).map(e=>({label:s[e].label,value:e}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.InspectorControls,{children:(0,r.jsxs)(l.PanelBody,{title:(0,a.__)("Film Meta Settings","eventive"),children:[(0,r.jsx)(l.SelectControl,{label:(0,a.__)("Meta Field","eventive"),value:c,options:x,onChange:e=>t({metaField:e}),help:(0,a.__)("Choose which film metadata to display","eventive")}),(0,r.jsx)(l.ToggleControl,{label:(0,a.__)("Show Label","eventive"),checked:d,onChange:e=>t({showLabel:e})}),d&&(0,r.jsx)(l.TextControl,{label:(0,a.__)("Custom Label","eventive"),value:_,onChange:e=>t({label:e}),placeholder:f.label,help:(0,a.__)("Leave empty to use the default label","eventive")})]})}),(0,r.jsx)("span",{...p,children:u?(0,r.jsx)("span",{className:"eventive-loading",children:(0,a.__)("Loading...","eventive")}):(0,r.jsxs)(r.Fragment,{children:[d&&(0,r.jsxs)("strong",{className:"eventive-film-meta-label",children:[g,":"," "]}),(0,r.jsx)("span",{className:"eventive-film-meta-value",children:j})]})})]})},save:function({attributes:e}){const{metaField:t,label:a,showLabel:l}=e,i=n.useBlockProps.save({"data-meta-field":t,"data-label":a,"data-show-label":String(l)});return(0,r.jsx)("span",{...i,children:(0,r.jsx)("span",{className:"eventive-loading",children:"Loading..."})})}})})();