(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var l in a)e.o(a,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:a[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,a=window.wp.i18n,l=window.wp.blockEditor,n=window.wp.components,i=(window.wp.data,window.wp.element),o=window.wp.apiFetch;var v=e.n(o);const s=window.ReactJSXRuntime,r={_eventive_runtime:{label:(0,a.__)("Runtime","eventive"),format:e=>{if(!e)return(0,a.__)("Runtime not available","eventive");const t=Math.floor(e/60),l=e%60;return t>0?`${t}h ${l}m`:`${l}m`}},_eventive_year:{label:(0,a.__)("Year","eventive"),format:e=>e||(0,a.__)("Year not available","eventive")},_eventive_language:{label:(0,a.__)("Language","eventive"),format:e=>e||(0,a.__)("Language not available","eventive")},_eventive_country:{label:(0,a.__)("Country","eventive"),format:e=>e||(0,a.__)("Country not available","eventive")},_eventive_director:{label:(0,a.__)("Director","eventive"),format:e=>e||(0,a.__)("Director not available","eventive")}},c=JSON.parse('{"UU":"eventive/film-meta"}');(0,t.registerBlockType)(c.UU,{edit:function({attributes:e,setAttributes:t,context:o}){const{metaField:c,label:d,showLabel:_}=e,[m,b]=(0,i.useState)(null),[h,u]=(0,i.useState)(!0),p=(0,l.useBlockProps)({className:"eventive-film-meta-block"}),w=o.postId;(0,i.useEffect)(()=>{w?(u(!0),v()({path:`/wp/v2/eventive_film/${w}`}).then(e=>{const t=e.meta?.[c];b(t),u(!1)}).catch(e=>{console.error("[eventive-film-meta] Error fetching meta:",e),b(null),u(!1)})):u(!1)},[w,c]);const f=r[c]||{},g=d||f.label||c,j=f.format?f.format(m):m||(0,a.__)("No value","eventive"),x=Object.keys(r).map(e=>({label:r[e].label,value:e}));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.InspectorControls,{children:(0,s.jsxs)(n.PanelBody,{title:(0,a.__)("Film Meta Settings","eventive"),children:[(0,s.jsx)(n.SelectControl,{label:(0,a.__)("Meta Field","eventive"),value:c,options:x,onChange:e=>t({metaField:e}),help:(0,a.__)("Choose which film metadata to display","eventive")}),(0,s.jsx)(n.ToggleControl,{label:(0,a.__)("Show Label","eventive"),checked:_,onChange:e=>t({showLabel:e})}),_&&(0,s.jsx)(n.TextControl,{label:(0,a.__)("Custom Label","eventive"),value:d,onChange:e=>t({label:e}),placeholder:f.label,help:(0,a.__)("Leave empty to use the default label","eventive")})]})}),(0,s.jsx)("div",{...p,children:(0,s.jsxs)("div",{className:"eventive-block-placeholder",children:[(0,s.jsx)("div",{className:"eventive-block-placeholder__icon",children:(0,s.jsx)("span",{className:"dashicon dashicons-admin-settings"})}),(0,s.jsx)("div",{className:"eventive-block-placeholder__label",children:(0,a.__)("Eventive Film Meta","eventive")}),(0,s.jsx)("div",{className:"eventive-block-placeholder__description",children:h?(0,s.jsx)("div",{className:"eventive-loading",children:(0,a.__)("Loading...","eventive")}):(0,s.jsxs)("div",{className:"eventive-film-meta-preview",children:[_&&(0,s.jsxs)("strong",{className:"eventive-film-meta-label",children:[g,":"," "]}),(0,s.jsx)("span",{className:"eventive-film-meta-value",children:j})]})})]})})]})},save:function({attributes:e}){const{metaField:t,label:a,showLabel:n}=e,i=l.useBlockProps.save({"data-meta-field":t,"data-label":a,"data-show-label":String(n)});return(0,s.jsx)("div",{...i,children:(0,s.jsx)("div",{className:"eventive-loading",children:"Loading..."})})}})})();