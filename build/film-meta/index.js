(()=>{"use strict";const e=window.wp.blocks,t=window.wp.i18n,a=window.wp.blockEditor,l=window.wp.components,n=window.wp.data,i=window.wp.element,o=window.ReactJSXRuntime,v={_eventive_runtime:{label:(0,t.__)("Runtime","eventive"),format:e=>{if(!e)return(0,t.__)("Runtime not available","eventive");const a=Math.floor(e/60),l=e%60;return a>0?`${a}h ${l}m`:`${l}m`}},_eventive_year:{label:(0,t.__)("Year","eventive"),format:e=>e||(0,t.__)("Year not available","eventive")},_eventive_language:{label:(0,t.__)("Language","eventive"),format:e=>e||(0,t.__)("Language not available","eventive")},_eventive_country:{label:(0,t.__)("Country","eventive"),format:e=>e||(0,t.__)("Country not available","eventive")},_eventive_director:{label:(0,t.__)("Director","eventive"),format:e=>e||(0,t.__)("Director not available","eventive")}},s=JSON.parse('{"UU":"eventive/film-meta"}');(0,e.registerBlockType)(s.UU,{edit:function({attributes:e,setAttributes:s}){const{metaField:r,label:c,showLabel:d}=e,[_,m]=(0,i.useState)(null),[h,b]=(0,i.useState)(!0),u=(0,a.useBlockProps)({className:"eventive-film-meta-block"}),w=(0,n.useSelect)(e=>e("core/editor").getCurrentPostId(),[]);(0,i.useEffect)(()=>{w?(b(!0),fetch(`/wp-json/wp/v2/eventive_film/${w}`).then(e=>{if(!e.ok)throw new Error("Failed to fetch post data");return e.json()}).then(e=>{const t=e.meta?.[r];m(t),b(!1)}).catch(e=>{console.error("[eventive-film-meta] Error fetching meta:",e),m(null),b(!1)})):b(!1)},[w,r]);const p=v[r]||{},f=c||p.label||r,g=p.format?p.format(_):_||(0,t.__)("No value","eventive"),j=Object.keys(v).map(e=>({label:v[e].label,value:e}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.InspectorControls,{children:(0,o.jsxs)(l.PanelBody,{title:(0,t.__)("Film Meta Settings","eventive"),children:[(0,o.jsx)(l.SelectControl,{label:(0,t.__)("Meta Field","eventive"),value:r,options:j,onChange:e=>s({metaField:e}),help:(0,t.__)("Choose which film metadata to display","eventive")}),(0,o.jsx)(l.ToggleControl,{label:(0,t.__)("Show Label","eventive"),checked:d,onChange:e=>s({showLabel:e})}),d&&(0,o.jsx)(l.TextControl,{label:(0,t.__)("Custom Label","eventive"),value:c,onChange:e=>s({label:e}),placeholder:p.label,help:(0,t.__)("Leave empty to use the default label","eventive")})]})}),(0,o.jsx)("div",{...u,children:(0,o.jsxs)("div",{className:"eventive-block-placeholder",children:[(0,o.jsx)("div",{className:"eventive-block-placeholder__icon",children:(0,o.jsx)("span",{className:"dashicon dashicons-admin-settings"})}),(0,o.jsx)("div",{className:"eventive-block-placeholder__label",children:(0,t.__)("Eventive Film Meta","eventive")}),(0,o.jsx)("div",{className:"eventive-block-placeholder__description",children:h?(0,o.jsx)("div",{className:"eventive-loading",children:(0,t.__)("Loading...","eventive")}):(0,o.jsxs)("div",{className:"eventive-film-meta-preview",children:[d&&(0,o.jsxs)("strong",{className:"eventive-film-meta-label",children:[f,":"," "]}),(0,o.jsx)("span",{className:"eventive-film-meta-value",children:g})]})})]})})]})},save:function({attributes:e}){const{metaField:t,label:l,showLabel:n}=e,i=a.useBlockProps.save({"data-meta-field":t,"data-label":l,"data-show-label":n});return(0,o.jsx)("div",{...i,children:(0,o.jsx)("div",{className:"eventive-loading",children:"Loading..."})})}})})();